# This file was auto-generated by Fern from our API Definition.

import typing

from ..core.client_wrapper import AsyncClientWrapper, SyncClientWrapper
from ..core.request_options import RequestOptions
from .raw_client import AsyncRawInboundParsingClient, RawInboundParsingClient
from .types.get_inbound_email_events_by_uuid_response import GetInboundEmailEventsByUuidResponse
from .types.get_inbound_email_events_request_sort import GetInboundEmailEventsRequestSort
from .types.get_inbound_email_events_response import GetInboundEmailEventsResponse


class InboundParsingClient:
    def __init__(self, *, client_wrapper: SyncClientWrapper):
        self._raw_client = RawInboundParsingClient(client_wrapper=client_wrapper)

    @property
    def with_raw_response(self) -> RawInboundParsingClient:
        """
        Retrieves a raw implementation of this client that returns raw responses.

        Returns
        -------
        RawInboundParsingClient
        """
        return self._raw_client

    def get_inbound_email_events(
        self,
        *,
        sender: typing.Optional[str] = None,
        start_date: typing.Optional[str] = None,
        end_date: typing.Optional[str] = None,
        limit: typing.Optional[int] = None,
        offset: typing.Optional[int] = None,
        sort: typing.Optional[GetInboundEmailEventsRequestSort] = None,
        request_options: typing.Optional[RequestOptions] = None,
    ) -> GetInboundEmailEventsResponse:
        """
        This endpoint will show the list of all the events for the received emails.

        Parameters
        ----------
        sender : typing.Optional[str]
            Email address of the sender.

        start_date : typing.Optional[str]
            Mandatory if endDate is used. Starting date (YYYY-MM-DD or YYYY-MM-DDTHH:mm:ss.SSSZ) from which you want to fetch the list. Maximum time period that can be selected is one month.

        end_date : typing.Optional[str]
            Mandatory if startDate is used. Ending date (YYYY-MM-DD or YYYY-MM-DDTHH:mm:ss.SSSZ) till which you want to fetch the list. Maximum time period that can be selected is one month.

        limit : typing.Optional[int]
            Number of documents returned per page

        offset : typing.Optional[int]
            Index of the first document on the page

        sort : typing.Optional[GetInboundEmailEventsRequestSort]
            Sort the results in the ascending/descending order of record creation

        request_options : typing.Optional[RequestOptions]
            Request-specific configuration.

        Returns
        -------
        GetInboundEmailEventsResponse
            List of events for received emails.

        Examples
        --------
        from brevo import Brevo

        client = Brevo(
            api_key="YOUR_API_KEY",
        )
        client.inbound_parsing.get_inbound_email_events()
        """
        _response = self._raw_client.get_inbound_email_events(
            sender=sender,
            start_date=start_date,
            end_date=end_date,
            limit=limit,
            offset=offset,
            sort=sort,
            request_options=request_options,
        )
        return _response.data

    def get_inbound_email_events_by_uuid(
        self, uuid_: str, *, request_options: typing.Optional[RequestOptions] = None
    ) -> GetInboundEmailEventsByUuidResponse:
        """
        This endpoint will show the list of all events history for one particular received email.

        Parameters
        ----------
        uuid_ : str
            UUID to fetch events specific to received email

        request_options : typing.Optional[RequestOptions]
            Request-specific configuration.

        Returns
        -------
        GetInboundEmailEventsByUuidResponse
            Email campaign informations

        Examples
        --------
        from brevo import Brevo

        client = Brevo(
            api_key="YOUR_API_KEY",
        )
        client.inbound_parsing.get_inbound_email_events_by_uuid(
            uuid_="uuid",
        )
        """
        _response = self._raw_client.get_inbound_email_events_by_uuid(uuid_, request_options=request_options)
        return _response.data

    def get_inbound_email_attachment(
        self, download_token: str, *, request_options: typing.Optional[RequestOptions] = None
    ) -> typing.Iterator[bytes]:
        """
        This endpoint will retrieve inbound attachment with download token.

        Parameters
        ----------
        download_token : str
            Token to fetch a particular attachment

        request_options : typing.Optional[RequestOptions]
            Request-specific configuration. You can pass in configuration such as `chunk_size`, and more to customize the request and response.

        Returns
        -------
        typing.Iterator[bytes]
            Attachment information

        Examples
        --------
        from brevo import Brevo

        client = Brevo(
            api_key="YOUR_API_KEY",
        )
        client.inbound_parsing.get_inbound_email_attachment(
            download_token="downloadToken",
        )
        """
        with self._raw_client.get_inbound_email_attachment(download_token, request_options=request_options) as r:
            yield from r.data


class AsyncInboundParsingClient:
    def __init__(self, *, client_wrapper: AsyncClientWrapper):
        self._raw_client = AsyncRawInboundParsingClient(client_wrapper=client_wrapper)

    @property
    def with_raw_response(self) -> AsyncRawInboundParsingClient:
        """
        Retrieves a raw implementation of this client that returns raw responses.

        Returns
        -------
        AsyncRawInboundParsingClient
        """
        return self._raw_client

    async def get_inbound_email_events(
        self,
        *,
        sender: typing.Optional[str] = None,
        start_date: typing.Optional[str] = None,
        end_date: typing.Optional[str] = None,
        limit: typing.Optional[int] = None,
        offset: typing.Optional[int] = None,
        sort: typing.Optional[GetInboundEmailEventsRequestSort] = None,
        request_options: typing.Optional[RequestOptions] = None,
    ) -> GetInboundEmailEventsResponse:
        """
        This endpoint will show the list of all the events for the received emails.

        Parameters
        ----------
        sender : typing.Optional[str]
            Email address of the sender.

        start_date : typing.Optional[str]
            Mandatory if endDate is used. Starting date (YYYY-MM-DD or YYYY-MM-DDTHH:mm:ss.SSSZ) from which you want to fetch the list. Maximum time period that can be selected is one month.

        end_date : typing.Optional[str]
            Mandatory if startDate is used. Ending date (YYYY-MM-DD or YYYY-MM-DDTHH:mm:ss.SSSZ) till which you want to fetch the list. Maximum time period that can be selected is one month.

        limit : typing.Optional[int]
            Number of documents returned per page

        offset : typing.Optional[int]
            Index of the first document on the page

        sort : typing.Optional[GetInboundEmailEventsRequestSort]
            Sort the results in the ascending/descending order of record creation

        request_options : typing.Optional[RequestOptions]
            Request-specific configuration.

        Returns
        -------
        GetInboundEmailEventsResponse
            List of events for received emails.

        Examples
        --------
        import asyncio

        from brevo import AsyncBrevo

        client = AsyncBrevo(
            api_key="YOUR_API_KEY",
        )


        async def main() -> None:
            await client.inbound_parsing.get_inbound_email_events()


        asyncio.run(main())
        """
        _response = await self._raw_client.get_inbound_email_events(
            sender=sender,
            start_date=start_date,
            end_date=end_date,
            limit=limit,
            offset=offset,
            sort=sort,
            request_options=request_options,
        )
        return _response.data

    async def get_inbound_email_events_by_uuid(
        self, uuid_: str, *, request_options: typing.Optional[RequestOptions] = None
    ) -> GetInboundEmailEventsByUuidResponse:
        """
        This endpoint will show the list of all events history for one particular received email.

        Parameters
        ----------
        uuid_ : str
            UUID to fetch events specific to received email

        request_options : typing.Optional[RequestOptions]
            Request-specific configuration.

        Returns
        -------
        GetInboundEmailEventsByUuidResponse
            Email campaign informations

        Examples
        --------
        import asyncio

        from brevo import AsyncBrevo

        client = AsyncBrevo(
            api_key="YOUR_API_KEY",
        )


        async def main() -> None:
            await client.inbound_parsing.get_inbound_email_events_by_uuid(
                uuid_="uuid",
            )


        asyncio.run(main())
        """
        _response = await self._raw_client.get_inbound_email_events_by_uuid(uuid_, request_options=request_options)
        return _response.data

    async def get_inbound_email_attachment(
        self, download_token: str, *, request_options: typing.Optional[RequestOptions] = None
    ) -> typing.AsyncIterator[bytes]:
        """
        This endpoint will retrieve inbound attachment with download token.

        Parameters
        ----------
        download_token : str
            Token to fetch a particular attachment

        request_options : typing.Optional[RequestOptions]
            Request-specific configuration. You can pass in configuration such as `chunk_size`, and more to customize the request and response.

        Returns
        -------
        typing.AsyncIterator[bytes]
            Attachment information

        Examples
        --------
        import asyncio

        from brevo import AsyncBrevo

        client = AsyncBrevo(
            api_key="YOUR_API_KEY",
        )


        async def main() -> None:
            await client.inbound_parsing.get_inbound_email_attachment(
                download_token="downloadToken",
            )


        asyncio.run(main())
        """
        async with self._raw_client.get_inbound_email_attachment(download_token, request_options=request_options) as r:
            async for _chunk in r.data:
                yield _chunk
