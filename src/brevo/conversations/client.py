# This file was auto-generated by Fern from our API Definition.

import typing

from ..core.client_wrapper import AsyncClientWrapper, SyncClientWrapper
from ..core.request_options import RequestOptions
from ..types.conversations_message import ConversationsMessage
from .raw_client import AsyncRawConversationsClient, RawConversationsClient
from .types.put_conversations_visitor_group_response import PutConversationsVisitorGroupResponse

# this is used as the default value for optional parameters
OMIT = typing.cast(typing.Any, ...)


class ConversationsClient:
    def __init__(self, *, client_wrapper: SyncClientWrapper):
        self._raw_client = RawConversationsClient(client_wrapper=client_wrapper)

    @property
    def with_raw_response(self) -> RawConversationsClient:
        """
        Retrieves a raw implementation of this client that returns raw responses.

        Returns
        -------
        RawConversationsClient
        """
        return self._raw_client

    def sets_agents_status_to_online_for23minutes(
        self,
        *,
        agent_email: typing.Optional[typing.Any] = OMIT,
        agent_id: typing.Optional[typing.Any] = OMIT,
        agent_name: typing.Optional[typing.Any] = OMIT,
        received_from: typing.Optional[typing.Any] = OMIT,
        request_options: typing.Optional[RequestOptions] = None,
    ) -> None:
        """
        We recommend pinging this endpoint every minute for as long as the agent has to be considered online.

        Parameters
        ----------
        agent_email : typing.Optional[typing.Any]
            agent email. When sending online pings from a standalone system, it’s hard to maintain a 1-to-1 relationship between the users of both systems. In this case, an agent can be specified by their email address. If there’s no agent with the specified email address in your Brevo organization, a dummy agent will be created automatically.

        agent_id : typing.Optional[typing.Any]
            agent ID. It can be found on agent’s page or received <a href="https://developers.brevo.com/docs/conversations-webhooks">from a webhook</a>. Alternatively, you can use `agentEmail` + `agentName` + `receivedFrom` instead (all 3 fields required).

        agent_name : typing.Optional[typing.Any]
            agent name

        received_from : typing.Optional[typing.Any]
            mark your messages to distinguish messages created by you from the others.

        request_options : typing.Optional[RequestOptions]
            Request-specific configuration.

        Returns
        -------
        None

        Examples
        --------
        from brevo import Brevo

        client = Brevo(
            api_key="YOUR_API_KEY",
        )
        client.conversations.sets_agents_status_to_online_for23minutes(
            agent_id="d9nKoegKSjmCtyK78",
        )
        """
        _response = self._raw_client.sets_agents_status_to_online_for23minutes(
            agent_email=agent_email,
            agent_id=agent_id,
            agent_name=agent_name,
            received_from=received_from,
            request_options=request_options,
        )
        return _response.data

    def send_a_message_as_an_agent(
        self,
        *,
        text: typing.Any,
        visitor_id: typing.Any,
        agent_email: typing.Optional[typing.Any] = OMIT,
        agent_id: typing.Optional[typing.Any] = OMIT,
        agent_name: typing.Optional[typing.Any] = OMIT,
        received_from: typing.Optional[typing.Any] = OMIT,
        request_options: typing.Optional[RequestOptions] = None,
    ) -> ConversationsMessage:
        """
        Parameters
        ----------
        text : typing.Any

        visitor_id : typing.Any

        agent_email : typing.Optional[typing.Any]
            agent email. When sending messages from a standalone system, it’s hard to maintain a 1-to-1 relationship between the users of both systems. In this case, an agent can be specified by their email address.

        agent_id : typing.Optional[typing.Any]
            agent ID. It can be found on agent’s page or received <a href="https://developers.brevo.com/docs/conversations-webhooks">from a webhook</a>. Alternatively, you can use `agentEmail` + `agentName` + `receivedFrom` instead (all 3 fields required).

        agent_name : typing.Optional[typing.Any]
            agent name

        received_from : typing.Optional[typing.Any]
            mark your messages to distinguish messages created by you from the others.

        request_options : typing.Optional[RequestOptions]
            Request-specific configuration.

        Returns
        -------
        ConversationsMessage
            Newly created message is returned as a response

        Examples
        --------
        from brevo import Brevo

        client = Brevo(
            api_key="YOUR_API_KEY",
        )
        client.conversations.send_a_message_as_an_agent(
            agent_id="d9nKoegKSjmCtyK78",
            text="Hello! How can I help you?",
            visitor_id="kZMvWhf8npAu3H6qd57w2Hv6nh6rnxvg",
        )
        """
        _response = self._raw_client.send_a_message_as_an_agent(
            text=text,
            visitor_id=visitor_id,
            agent_email=agent_email,
            agent_id=agent_id,
            agent_name=agent_name,
            received_from=received_from,
            request_options=request_options,
        )
        return _response.data

    def get_a_message(
        self, id: str, *, request_options: typing.Optional[RequestOptions] = None
    ) -> ConversationsMessage:
        """
        Parameters
        ----------
        id : str
            ID of the message

        request_options : typing.Optional[RequestOptions]
            Request-specific configuration.

        Returns
        -------
        ConversationsMessage
            Requested message is returned as a response

        Examples
        --------
        from brevo import Brevo

        client = Brevo(
            api_key="YOUR_API_KEY",
        )
        client.conversations.get_a_message(
            id="id",
        )
        """
        _response = self._raw_client.get_a_message(id, request_options=request_options)
        return _response.data

    def update_a_message_sent_by_an_agent(
        self, id: str, *, text: str, request_options: typing.Optional[RequestOptions] = None
    ) -> ConversationsMessage:
        """
        Only agents’ messages can be edited.

        Parameters
        ----------
        id : str
            ID of the message

        text : str
            edited message text

        request_options : typing.Optional[RequestOptions]
            Request-specific configuration.

        Returns
        -------
        ConversationsMessage
            Updated message is returned as a response

        Examples
        --------
        from brevo import Brevo

        client = Brevo(
            api_key="YOUR_API_KEY",
        )
        client.conversations.update_a_message_sent_by_an_agent(
            id="id",
            text="Good morning! How can I help you?",
        )
        """
        _response = self._raw_client.update_a_message_sent_by_an_agent(id, text=text, request_options=request_options)
        return _response.data

    def delete_a_message_sent_by_an_agent(
        self, id: str, *, request_options: typing.Optional[RequestOptions] = None
    ) -> None:
        """
        Only agents’ messages can be deleted.

        Parameters
        ----------
        id : str
            ID of the message

        request_options : typing.Optional[RequestOptions]
            Request-specific configuration.

        Returns
        -------
        None

        Examples
        --------
        from brevo import Brevo

        client = Brevo(
            api_key="YOUR_API_KEY",
        )
        client.conversations.delete_a_message_sent_by_an_agent(
            id="id",
        )
        """
        _response = self._raw_client.delete_a_message_sent_by_an_agent(id, request_options=request_options)
        return _response.data

    def send_an_automated_message_to_a_visitor(
        self,
        *,
        text: typing.Any,
        visitor_id: typing.Any,
        agent_id: typing.Optional[typing.Any] = OMIT,
        group_id: typing.Optional[typing.Any] = OMIT,
        request_options: typing.Optional[RequestOptions] = None,
    ) -> ConversationsMessage:
        """
        Example of automated messages: order status, announce new features in your web app, etc.

        Parameters
        ----------
        text : typing.Any

        visitor_id : typing.Any

        agent_id : typing.Optional[typing.Any]
            agent ID. It can be found on agent’s page or received <a href="https://developers.brevo.com/docs/conversations-webhooks">from a webhook</a>.

        group_id : typing.Optional[typing.Any]
            group ID. It can be found on group’s page.

        request_options : typing.Optional[RequestOptions]
            Request-specific configuration.

        Returns
        -------
        ConversationsMessage
            Newly created message is returned as a response

        Examples
        --------
        from brevo import Brevo

        client = Brevo(
            api_key="YOUR_API_KEY",
        )
        client.conversations.send_an_automated_message_to_a_visitor(
            group_id="PjRBMhWGen6aRHjif",
            text="Your order has shipped! Here’s your tracking number: 9114 5847 3325 9667 4328 88",
            visitor_id="kZMvWhf8npAu3H6qd57w2Hv6nh6rnxvg",
        )
        """
        _response = self._raw_client.send_an_automated_message_to_a_visitor(
            text=text, visitor_id=visitor_id, agent_id=agent_id, group_id=group_id, request_options=request_options
        )
        return _response.data

    def get_an_automated_message(
        self, id: str, *, request_options: typing.Optional[RequestOptions] = None
    ) -> ConversationsMessage:
        """
        Parameters
        ----------
        id : str
            ID of the message sent previously

        request_options : typing.Optional[RequestOptions]
            Request-specific configuration.

        Returns
        -------
        ConversationsMessage
            Requested message is returned as a response

        Examples
        --------
        from brevo import Brevo

        client = Brevo(
            api_key="YOUR_API_KEY",
        )
        client.conversations.get_an_automated_message(
            id="id",
        )
        """
        _response = self._raw_client.get_an_automated_message(id, request_options=request_options)
        return _response.data

    def update_an_automated_message(
        self, id: str, *, text: str, request_options: typing.Optional[RequestOptions] = None
    ) -> ConversationsMessage:
        """
        Parameters
        ----------
        id : str
            ID of the message

        text : str
            edited message text

        request_options : typing.Optional[RequestOptions]
            Request-specific configuration.

        Returns
        -------
        ConversationsMessage
            Updated message is returned as a response

        Examples
        --------
        from brevo import Brevo

        client = Brevo(
            api_key="YOUR_API_KEY",
        )
        client.conversations.update_an_automated_message(
            id="id",
            text="Your order has shipped! Here’s your tracking number: 9114 5847 4668 7775 9233 54",
        )
        """
        _response = self._raw_client.update_an_automated_message(id, text=text, request_options=request_options)
        return _response.data

    def delete_an_automated_message(self, id: str, *, request_options: typing.Optional[RequestOptions] = None) -> None:
        """
        Parameters
        ----------
        id : str
            ID of the message

        request_options : typing.Optional[RequestOptions]
            Request-specific configuration.

        Returns
        -------
        None

        Examples
        --------
        from brevo import Brevo

        client = Brevo(
            api_key="YOUR_API_KEY",
        )
        client.conversations.delete_an_automated_message(
            id="id",
        )
        """
        _response = self._raw_client.delete_an_automated_message(id, request_options=request_options)
        return _response.data

    def set_visitor_group_assignment(
        self, *, group_id: typing.Any, request_options: typing.Optional[RequestOptions] = None
    ) -> PutConversationsVisitorGroupResponse:
        """
        Assigns a visitor to a specific agent group or removes them from their current group.

        Parameters
        ----------
        group_id : typing.Any

        request_options : typing.Optional[RequestOptions]
            Request-specific configuration.

        Returns
        -------
        PutConversationsVisitorGroupResponse
            Visitor assigned to group

        Examples
        --------
        from brevo import Brevo

        client = Brevo(
            api_key="YOUR_API_KEY",
        )
        client.conversations.set_visitor_group_assignment(
            group_id="PjRBMhWGen6aRHjif",
        )
        """
        _response = self._raw_client.set_visitor_group_assignment(group_id=group_id, request_options=request_options)
        return _response.data


class AsyncConversationsClient:
    def __init__(self, *, client_wrapper: AsyncClientWrapper):
        self._raw_client = AsyncRawConversationsClient(client_wrapper=client_wrapper)

    @property
    def with_raw_response(self) -> AsyncRawConversationsClient:
        """
        Retrieves a raw implementation of this client that returns raw responses.

        Returns
        -------
        AsyncRawConversationsClient
        """
        return self._raw_client

    async def sets_agents_status_to_online_for23minutes(
        self,
        *,
        agent_email: typing.Optional[typing.Any] = OMIT,
        agent_id: typing.Optional[typing.Any] = OMIT,
        agent_name: typing.Optional[typing.Any] = OMIT,
        received_from: typing.Optional[typing.Any] = OMIT,
        request_options: typing.Optional[RequestOptions] = None,
    ) -> None:
        """
        We recommend pinging this endpoint every minute for as long as the agent has to be considered online.

        Parameters
        ----------
        agent_email : typing.Optional[typing.Any]
            agent email. When sending online pings from a standalone system, it’s hard to maintain a 1-to-1 relationship between the users of both systems. In this case, an agent can be specified by their email address. If there’s no agent with the specified email address in your Brevo organization, a dummy agent will be created automatically.

        agent_id : typing.Optional[typing.Any]
            agent ID. It can be found on agent’s page or received <a href="https://developers.brevo.com/docs/conversations-webhooks">from a webhook</a>. Alternatively, you can use `agentEmail` + `agentName` + `receivedFrom` instead (all 3 fields required).

        agent_name : typing.Optional[typing.Any]
            agent name

        received_from : typing.Optional[typing.Any]
            mark your messages to distinguish messages created by you from the others.

        request_options : typing.Optional[RequestOptions]
            Request-specific configuration.

        Returns
        -------
        None

        Examples
        --------
        import asyncio

        from brevo import AsyncBrevo

        client = AsyncBrevo(
            api_key="YOUR_API_KEY",
        )


        async def main() -> None:
            await client.conversations.sets_agents_status_to_online_for23minutes(
                agent_id="d9nKoegKSjmCtyK78",
            )


        asyncio.run(main())
        """
        _response = await self._raw_client.sets_agents_status_to_online_for23minutes(
            agent_email=agent_email,
            agent_id=agent_id,
            agent_name=agent_name,
            received_from=received_from,
            request_options=request_options,
        )
        return _response.data

    async def send_a_message_as_an_agent(
        self,
        *,
        text: typing.Any,
        visitor_id: typing.Any,
        agent_email: typing.Optional[typing.Any] = OMIT,
        agent_id: typing.Optional[typing.Any] = OMIT,
        agent_name: typing.Optional[typing.Any] = OMIT,
        received_from: typing.Optional[typing.Any] = OMIT,
        request_options: typing.Optional[RequestOptions] = None,
    ) -> ConversationsMessage:
        """
        Parameters
        ----------
        text : typing.Any

        visitor_id : typing.Any

        agent_email : typing.Optional[typing.Any]
            agent email. When sending messages from a standalone system, it’s hard to maintain a 1-to-1 relationship between the users of both systems. In this case, an agent can be specified by their email address.

        agent_id : typing.Optional[typing.Any]
            agent ID. It can be found on agent’s page or received <a href="https://developers.brevo.com/docs/conversations-webhooks">from a webhook</a>. Alternatively, you can use `agentEmail` + `agentName` + `receivedFrom` instead (all 3 fields required).

        agent_name : typing.Optional[typing.Any]
            agent name

        received_from : typing.Optional[typing.Any]
            mark your messages to distinguish messages created by you from the others.

        request_options : typing.Optional[RequestOptions]
            Request-specific configuration.

        Returns
        -------
        ConversationsMessage
            Newly created message is returned as a response

        Examples
        --------
        import asyncio

        from brevo import AsyncBrevo

        client = AsyncBrevo(
            api_key="YOUR_API_KEY",
        )


        async def main() -> None:
            await client.conversations.send_a_message_as_an_agent(
                agent_id="d9nKoegKSjmCtyK78",
                text="Hello! How can I help you?",
                visitor_id="kZMvWhf8npAu3H6qd57w2Hv6nh6rnxvg",
            )


        asyncio.run(main())
        """
        _response = await self._raw_client.send_a_message_as_an_agent(
            text=text,
            visitor_id=visitor_id,
            agent_email=agent_email,
            agent_id=agent_id,
            agent_name=agent_name,
            received_from=received_from,
            request_options=request_options,
        )
        return _response.data

    async def get_a_message(
        self, id: str, *, request_options: typing.Optional[RequestOptions] = None
    ) -> ConversationsMessage:
        """
        Parameters
        ----------
        id : str
            ID of the message

        request_options : typing.Optional[RequestOptions]
            Request-specific configuration.

        Returns
        -------
        ConversationsMessage
            Requested message is returned as a response

        Examples
        --------
        import asyncio

        from brevo import AsyncBrevo

        client = AsyncBrevo(
            api_key="YOUR_API_KEY",
        )


        async def main() -> None:
            await client.conversations.get_a_message(
                id="id",
            )


        asyncio.run(main())
        """
        _response = await self._raw_client.get_a_message(id, request_options=request_options)
        return _response.data

    async def update_a_message_sent_by_an_agent(
        self, id: str, *, text: str, request_options: typing.Optional[RequestOptions] = None
    ) -> ConversationsMessage:
        """
        Only agents’ messages can be edited.

        Parameters
        ----------
        id : str
            ID of the message

        text : str
            edited message text

        request_options : typing.Optional[RequestOptions]
            Request-specific configuration.

        Returns
        -------
        ConversationsMessage
            Updated message is returned as a response

        Examples
        --------
        import asyncio

        from brevo import AsyncBrevo

        client = AsyncBrevo(
            api_key="YOUR_API_KEY",
        )


        async def main() -> None:
            await client.conversations.update_a_message_sent_by_an_agent(
                id="id",
                text="Good morning! How can I help you?",
            )


        asyncio.run(main())
        """
        _response = await self._raw_client.update_a_message_sent_by_an_agent(
            id, text=text, request_options=request_options
        )
        return _response.data

    async def delete_a_message_sent_by_an_agent(
        self, id: str, *, request_options: typing.Optional[RequestOptions] = None
    ) -> None:
        """
        Only agents’ messages can be deleted.

        Parameters
        ----------
        id : str
            ID of the message

        request_options : typing.Optional[RequestOptions]
            Request-specific configuration.

        Returns
        -------
        None

        Examples
        --------
        import asyncio

        from brevo import AsyncBrevo

        client = AsyncBrevo(
            api_key="YOUR_API_KEY",
        )


        async def main() -> None:
            await client.conversations.delete_a_message_sent_by_an_agent(
                id="id",
            )


        asyncio.run(main())
        """
        _response = await self._raw_client.delete_a_message_sent_by_an_agent(id, request_options=request_options)
        return _response.data

    async def send_an_automated_message_to_a_visitor(
        self,
        *,
        text: typing.Any,
        visitor_id: typing.Any,
        agent_id: typing.Optional[typing.Any] = OMIT,
        group_id: typing.Optional[typing.Any] = OMIT,
        request_options: typing.Optional[RequestOptions] = None,
    ) -> ConversationsMessage:
        """
        Example of automated messages: order status, announce new features in your web app, etc.

        Parameters
        ----------
        text : typing.Any

        visitor_id : typing.Any

        agent_id : typing.Optional[typing.Any]
            agent ID. It can be found on agent’s page or received <a href="https://developers.brevo.com/docs/conversations-webhooks">from a webhook</a>.

        group_id : typing.Optional[typing.Any]
            group ID. It can be found on group’s page.

        request_options : typing.Optional[RequestOptions]
            Request-specific configuration.

        Returns
        -------
        ConversationsMessage
            Newly created message is returned as a response

        Examples
        --------
        import asyncio

        from brevo import AsyncBrevo

        client = AsyncBrevo(
            api_key="YOUR_API_KEY",
        )


        async def main() -> None:
            await client.conversations.send_an_automated_message_to_a_visitor(
                group_id="PjRBMhWGen6aRHjif",
                text="Your order has shipped! Here’s your tracking number: 9114 5847 3325 9667 4328 88",
                visitor_id="kZMvWhf8npAu3H6qd57w2Hv6nh6rnxvg",
            )


        asyncio.run(main())
        """
        _response = await self._raw_client.send_an_automated_message_to_a_visitor(
            text=text, visitor_id=visitor_id, agent_id=agent_id, group_id=group_id, request_options=request_options
        )
        return _response.data

    async def get_an_automated_message(
        self, id: str, *, request_options: typing.Optional[RequestOptions] = None
    ) -> ConversationsMessage:
        """
        Parameters
        ----------
        id : str
            ID of the message sent previously

        request_options : typing.Optional[RequestOptions]
            Request-specific configuration.

        Returns
        -------
        ConversationsMessage
            Requested message is returned as a response

        Examples
        --------
        import asyncio

        from brevo import AsyncBrevo

        client = AsyncBrevo(
            api_key="YOUR_API_KEY",
        )


        async def main() -> None:
            await client.conversations.get_an_automated_message(
                id="id",
            )


        asyncio.run(main())
        """
        _response = await self._raw_client.get_an_automated_message(id, request_options=request_options)
        return _response.data

    async def update_an_automated_message(
        self, id: str, *, text: str, request_options: typing.Optional[RequestOptions] = None
    ) -> ConversationsMessage:
        """
        Parameters
        ----------
        id : str
            ID of the message

        text : str
            edited message text

        request_options : typing.Optional[RequestOptions]
            Request-specific configuration.

        Returns
        -------
        ConversationsMessage
            Updated message is returned as a response

        Examples
        --------
        import asyncio

        from brevo import AsyncBrevo

        client = AsyncBrevo(
            api_key="YOUR_API_KEY",
        )


        async def main() -> None:
            await client.conversations.update_an_automated_message(
                id="id",
                text="Your order has shipped! Here’s your tracking number: 9114 5847 4668 7775 9233 54",
            )


        asyncio.run(main())
        """
        _response = await self._raw_client.update_an_automated_message(id, text=text, request_options=request_options)
        return _response.data

    async def delete_an_automated_message(
        self, id: str, *, request_options: typing.Optional[RequestOptions] = None
    ) -> None:
        """
        Parameters
        ----------
        id : str
            ID of the message

        request_options : typing.Optional[RequestOptions]
            Request-specific configuration.

        Returns
        -------
        None

        Examples
        --------
        import asyncio

        from brevo import AsyncBrevo

        client = AsyncBrevo(
            api_key="YOUR_API_KEY",
        )


        async def main() -> None:
            await client.conversations.delete_an_automated_message(
                id="id",
            )


        asyncio.run(main())
        """
        _response = await self._raw_client.delete_an_automated_message(id, request_options=request_options)
        return _response.data

    async def set_visitor_group_assignment(
        self, *, group_id: typing.Any, request_options: typing.Optional[RequestOptions] = None
    ) -> PutConversationsVisitorGroupResponse:
        """
        Assigns a visitor to a specific agent group or removes them from their current group.

        Parameters
        ----------
        group_id : typing.Any

        request_options : typing.Optional[RequestOptions]
            Request-specific configuration.

        Returns
        -------
        PutConversationsVisitorGroupResponse
            Visitor assigned to group

        Examples
        --------
        import asyncio

        from brevo import AsyncBrevo

        client = AsyncBrevo(
            api_key="YOUR_API_KEY",
        )


        async def main() -> None:
            await client.conversations.set_visitor_group_assignment(
                group_id="PjRBMhWGen6aRHjif",
            )


        asyncio.run(main())
        """
        _response = await self._raw_client.set_visitor_group_assignment(
            group_id=group_id, request_options=request_options
        )
        return _response.data
