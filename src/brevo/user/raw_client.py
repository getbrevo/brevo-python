# This file was auto-generated by Fern from our API Definition.

import typing
from json.decoder import JSONDecodeError

from ..core.api_error import ApiError
from ..core.client_wrapper import AsyncClientWrapper, SyncClientWrapper
from ..core.http_response import AsyncHttpResponse, HttpResponse
from ..core.jsonable_encoder import jsonable_encoder
from ..core.request_options import RequestOptions
from ..core.serialization import convert_and_respect_annotation_metadata
from ..core.unchecked_base_model import construct_type
from ..errors.bad_request_error import BadRequestError
from ..errors.forbidden_error import ForbiddenError
from ..types.inviteuser_privileges_item import InviteuserPrivilegesItem
from .types.edit_user_permission_response import EditUserPermissionResponse
from .types.get_invited_users_list_response import GetInvitedUsersListResponse
from .types.get_user_permission_response import GetUserPermissionResponse
from .types.inviteuser_response import InviteuserResponse
from .types.put_revoke_user_permission_response import PutRevokeUserPermissionResponse
from .types.putresendcancelinvitation_request_action import PutresendcancelinvitationRequestAction
from .types.putresendcancelinvitation_response import PutresendcancelinvitationResponse

# this is used as the default value for optional parameters
OMIT = typing.cast(typing.Any, ...)


class RawUserClient:
    def __init__(self, *, client_wrapper: SyncClientWrapper):
        self._client_wrapper = client_wrapper

    def get_invited_users_list(
        self, *, request_options: typing.Optional[RequestOptions] = None
    ) -> HttpResponse[GetInvitedUsersListResponse]:
        """
        Parameters
        ----------
        request_options : typing.Optional[RequestOptions]
            Request-specific configuration.

        Returns
        -------
        HttpResponse[GetInvitedUsersListResponse]
            list of all your users
        """
        _response = self._client_wrapper.httpx_client.request(
            "organization/invited/users",
            method="GET",
            request_options=request_options,
        )
        try:
            if 200 <= _response.status_code < 300:
                _data = typing.cast(
                    GetInvitedUsersListResponse,
                    construct_type(
                        type_=GetInvitedUsersListResponse,  # type: ignore
                        object_=_response.json(),
                    ),
                )
                return HttpResponse(response=_response, data=_data)
            if _response.status_code == 400:
                raise BadRequestError(
                    headers=dict(_response.headers),
                    body=typing.cast(
                        typing.Any,
                        construct_type(
                            type_=typing.Any,  # type: ignore
                            object_=_response.json(),
                        ),
                    ),
                )
            _response_json = _response.json()
        except JSONDecodeError:
            raise ApiError(status_code=_response.status_code, headers=dict(_response.headers), body=_response.text)
        raise ApiError(status_code=_response.status_code, headers=dict(_response.headers), body=_response_json)

    def put_revoke_user_permission(
        self, email: str, *, request_options: typing.Optional[RequestOptions] = None
    ) -> HttpResponse[PutRevokeUserPermissionResponse]:
        """
        Parameters
        ----------
        email : str
            Email of the invited user.

        request_options : typing.Optional[RequestOptions]
            Request-specific configuration.

        Returns
        -------
        HttpResponse[PutRevokeUserPermissionResponse]
            Credit note exists
        """
        _response = self._client_wrapper.httpx_client.request(
            f"organization/user/invitation/revoke/{jsonable_encoder(email)}",
            method="PUT",
            request_options=request_options,
        )
        try:
            if 200 <= _response.status_code < 300:
                _data = typing.cast(
                    PutRevokeUserPermissionResponse,
                    construct_type(
                        type_=PutRevokeUserPermissionResponse,  # type: ignore
                        object_=_response.json(),
                    ),
                )
                return HttpResponse(response=_response, data=_data)
            if _response.status_code == 403:
                raise ForbiddenError(
                    headers=dict(_response.headers),
                    body=typing.cast(
                        typing.Any,
                        construct_type(
                            type_=typing.Any,  # type: ignore
                            object_=_response.json(),
                        ),
                    ),
                )
            _response_json = _response.json()
        except JSONDecodeError:
            raise ApiError(status_code=_response.status_code, headers=dict(_response.headers), body=_response.text)
        raise ApiError(status_code=_response.status_code, headers=dict(_response.headers), body=_response_json)

    def inviteuser(
        self,
        *,
        all_features_access: bool,
        email: str,
        privileges: typing.Sequence[InviteuserPrivilegesItem],
        request_options: typing.Optional[RequestOptions] = None,
    ) -> HttpResponse[InviteuserResponse]:
        """
        `Feature` - A Feature represents a specific functionality like Email
        campaign, Deals, Calls, Automations, etc. on Brevo. While inviting a user,
        determine which feature you want to manage access to. You must specify the
        feature accurately to avoid errors. `Permission` - A Permission defines the
        level of access or control a user has over a specific feature. While
        inviting user, decide on the permission level required for the selected
        feature. Make sure the chosen permission is related to the selected feature.
        Features and their respective permissions are as below: - `email_campaigns`:
          - "create_edit_delete"
          - "send_schedule_suspend"
        - `sms_campaigns`:
          - "create_edit_delete"
          - "send_schedule_suspend"
        - `contacts`:
          - "view"
          - "create_edit_delete"
          - "import"
          - "export"
          - "list_and_attributes"
          - "forms"
        - `templates`:
          - "create_edit_delete"
          - "activate_deactivate"
        - `workflows`:
          - "create_edit_delete"
          - "activate_deactivate_pause"
          - "settings"
        - `landing_pages`:
          - "all"
        - `transactional_emails`:
          - "settings"
          - "logs"
        - `smtp_api`:
          - "smtp"
          - "api_keys"
          - "authorized_ips"
        - `user_management`:
          - "all"
        - `sales_platform`:
          - "create_edit_deals"
          - "delete_deals"
          - "manage_others_deals_tasks"
          - "reports"
          - "settings"
        - `phone`:
          - "all"
        - `conversations`:
          - "access"
          - "assign"
          - "configure"
        - `senders_domains_dedicated_ips`:
          - "senders_management"
          - "domains_management"
          - "dedicated_ips_management"
        - `push_notifications`:
          - "view"
          - "create_edit_delete"
          - "send"
          - "settings"
        - `companies`:
          - "manage_owned_companies"
          - "manage_other_companies"
          - "settings"
        **Note**: - If `all_features_access: false` then only privileges are
        required otherwise if `true` then it's assumed that all permissions will be
        there for the invited user. - The availability of feature and its permission
        depends on your current plan. Please select the features and permissions
        accordingly.

        Parameters
        ----------
        all_features_access : bool
            All access to the features

        email : str
            Email address for the organization

        privileges : typing.Sequence[InviteuserPrivilegesItem]

        request_options : typing.Optional[RequestOptions]
            Request-specific configuration.

        Returns
        -------
        HttpResponse[InviteuserResponse]
            Success
        """
        _response = self._client_wrapper.httpx_client.request(
            "organization/user/invitation/send",
            method="POST",
            json={
                "all_features_access": all_features_access,
                "email": email,
                "privileges": convert_and_respect_annotation_metadata(
                    object_=privileges, annotation=typing.Sequence[InviteuserPrivilegesItem], direction="write"
                ),
            },
            headers={
                "content-type": "application/json",
            },
            request_options=request_options,
            omit=OMIT,
        )
        try:
            if 200 <= _response.status_code < 300:
                _data = typing.cast(
                    InviteuserResponse,
                    construct_type(
                        type_=InviteuserResponse,  # type: ignore
                        object_=_response.json(),
                    ),
                )
                return HttpResponse(response=_response, data=_data)
            if _response.status_code == 400:
                raise BadRequestError(
                    headers=dict(_response.headers),
                    body=typing.cast(
                        typing.Any,
                        construct_type(
                            type_=typing.Any,  # type: ignore
                            object_=_response.json(),
                        ),
                    ),
                )
            _response_json = _response.json()
        except JSONDecodeError:
            raise ApiError(status_code=_response.status_code, headers=dict(_response.headers), body=_response.text)
        raise ApiError(status_code=_response.status_code, headers=dict(_response.headers), body=_response_json)

    def putresendcancelinvitation(
        self,
        action: PutresendcancelinvitationRequestAction,
        email: str,
        *,
        request_options: typing.Optional[RequestOptions] = None,
    ) -> HttpResponse[PutresendcancelinvitationResponse]:
        """
        Parameters
        ----------
        action : PutresendcancelinvitationRequestAction
            action

        email : str
            Email of the invited user.

        request_options : typing.Optional[RequestOptions]
            Request-specific configuration.

        Returns
        -------
        HttpResponse[PutresendcancelinvitationResponse]
            Success
        """
        _response = self._client_wrapper.httpx_client.request(
            f"organization/user/invitation/{jsonable_encoder(action)}/{jsonable_encoder(email)}",
            method="PUT",
            request_options=request_options,
        )
        try:
            if 200 <= _response.status_code < 300:
                _data = typing.cast(
                    PutresendcancelinvitationResponse,
                    construct_type(
                        type_=PutresendcancelinvitationResponse,  # type: ignore
                        object_=_response.json(),
                    ),
                )
                return HttpResponse(response=_response, data=_data)
            if _response.status_code == 403:
                raise ForbiddenError(
                    headers=dict(_response.headers),
                    body=typing.cast(
                        typing.Any,
                        construct_type(
                            type_=typing.Any,  # type: ignore
                            object_=_response.json(),
                        ),
                    ),
                )
            _response_json = _response.json()
        except JSONDecodeError:
            raise ApiError(status_code=_response.status_code, headers=dict(_response.headers), body=_response.text)
        raise ApiError(status_code=_response.status_code, headers=dict(_response.headers), body=_response_json)

    def edit_user_permission(
        self,
        *,
        all_features_access: bool,
        email: str,
        privileges: typing.Sequence[InviteuserPrivilegesItem],
        request_options: typing.Optional[RequestOptions] = None,
    ) -> HttpResponse[EditUserPermissionResponse]:
        """
        `Feature` - A Feature represents a specific functionality like Email
        campaign, Deals, Calls, Automations, etc. on Brevo. While inviting a user,
        determine which feature you want to manage access to. You must specify the
        feature accurately to avoid errors. `Permission` - A Permission defines the
        level of access or control a user has over a specific feature. While
        inviting user, decide on the permission level required for the selected
        feature. Make sure the chosen permission is related to the selected feature.
        Features and their respective permissions are as below: - `email_campaigns`:
          - "create_edit_delete"
          - "send_schedule_suspend"
        - `sms_campaigns`:
          - "create_edit_delete"
          - "send_schedule_suspend"
        - `contacts`:
          - "view"
          - "create_edit_delete"
          - "import"
          - "export"
          - "list_and_attributes"
          - "forms"
        - `templates`:
          - "create_edit_delete"
          - "activate_deactivate"
        - `workflows`:
          - "create_edit_delete"
          - "activate_deactivate_pause"
          - "settings"
        - `landing_pages`:
          - "all"
        - `transactional_emails`:
          - "settings"
          - "logs"
        - `smtp_api`:
          - "smtp"
          - "api_keys"
          - "authorized_ips"
        - `user_management`:
          - "all"
        - `sales_platform`:
          - "create_edit_deals"
          - "delete_deals"
          - "manage_others_deals_tasks"
          - "reports"
          - "settings"
        - `phone`:
          - "all"
        - `conversations`:
          - "access"
          - "assign"
          - "configure"
        - `senders_domains_dedicated_ips`:
          - "senders_management"
          - "domains_management"
          - "dedicated_ips_management"
        - `push_notifications`:
          - "view"
          - "create_edit_delete"
          - "send"
          - "settings"
        - `companies`:
          - "manage_owned_companies"
          - "manage_other_companies"
          - "settings"
        **Note**: - The privileges array remains the same as in the send invitation;
        the user simply needs to provide the permissions that need to be updated. -
        The availability of feature and its permission depends on your current plan.
        Please select the features and permissions accordingly.

        Parameters
        ----------
        all_features_access : bool
            All access to the features

        email : str
            Email address for the organization

        privileges : typing.Sequence[InviteuserPrivilegesItem]

        request_options : typing.Optional[RequestOptions]
            Request-specific configuration.

        Returns
        -------
        HttpResponse[EditUserPermissionResponse]
            Success
        """
        _response = self._client_wrapper.httpx_client.request(
            "organization/user/update/permissions",
            method="POST",
            json={
                "all_features_access": all_features_access,
                "email": email,
                "privileges": convert_and_respect_annotation_metadata(
                    object_=privileges, annotation=typing.Sequence[InviteuserPrivilegesItem], direction="write"
                ),
            },
            headers={
                "content-type": "application/json",
            },
            request_options=request_options,
            omit=OMIT,
        )
        try:
            if 200 <= _response.status_code < 300:
                _data = typing.cast(
                    EditUserPermissionResponse,
                    construct_type(
                        type_=EditUserPermissionResponse,  # type: ignore
                        object_=_response.json(),
                    ),
                )
                return HttpResponse(response=_response, data=_data)
            if _response.status_code == 400:
                raise BadRequestError(
                    headers=dict(_response.headers),
                    body=typing.cast(
                        typing.Any,
                        construct_type(
                            type_=typing.Any,  # type: ignore
                            object_=_response.json(),
                        ),
                    ),
                )
            _response_json = _response.json()
        except JSONDecodeError:
            raise ApiError(status_code=_response.status_code, headers=dict(_response.headers), body=_response.text)
        raise ApiError(status_code=_response.status_code, headers=dict(_response.headers), body=_response_json)

    def get_user_permission(
        self, email: str, *, request_options: typing.Optional[RequestOptions] = None
    ) -> HttpResponse[GetUserPermissionResponse]:
        """
        Parameters
        ----------
        email : str
            Email of the invited user.

        request_options : typing.Optional[RequestOptions]
            Request-specific configuration.

        Returns
        -------
        HttpResponse[GetUserPermissionResponse]
            list of all the user's permissions
        """
        _response = self._client_wrapper.httpx_client.request(
            f"organization/user/{jsonable_encoder(email)}/permissions",
            method="GET",
            request_options=request_options,
        )
        try:
            if 200 <= _response.status_code < 300:
                _data = typing.cast(
                    GetUserPermissionResponse,
                    construct_type(
                        type_=GetUserPermissionResponse,  # type: ignore
                        object_=_response.json(),
                    ),
                )
                return HttpResponse(response=_response, data=_data)
            if _response.status_code == 400:
                raise BadRequestError(
                    headers=dict(_response.headers),
                    body=typing.cast(
                        typing.Any,
                        construct_type(
                            type_=typing.Any,  # type: ignore
                            object_=_response.json(),
                        ),
                    ),
                )
            _response_json = _response.json()
        except JSONDecodeError:
            raise ApiError(status_code=_response.status_code, headers=dict(_response.headers), body=_response.text)
        raise ApiError(status_code=_response.status_code, headers=dict(_response.headers), body=_response_json)


class AsyncRawUserClient:
    def __init__(self, *, client_wrapper: AsyncClientWrapper):
        self._client_wrapper = client_wrapper

    async def get_invited_users_list(
        self, *, request_options: typing.Optional[RequestOptions] = None
    ) -> AsyncHttpResponse[GetInvitedUsersListResponse]:
        """
        Parameters
        ----------
        request_options : typing.Optional[RequestOptions]
            Request-specific configuration.

        Returns
        -------
        AsyncHttpResponse[GetInvitedUsersListResponse]
            list of all your users
        """
        _response = await self._client_wrapper.httpx_client.request(
            "organization/invited/users",
            method="GET",
            request_options=request_options,
        )
        try:
            if 200 <= _response.status_code < 300:
                _data = typing.cast(
                    GetInvitedUsersListResponse,
                    construct_type(
                        type_=GetInvitedUsersListResponse,  # type: ignore
                        object_=_response.json(),
                    ),
                )
                return AsyncHttpResponse(response=_response, data=_data)
            if _response.status_code == 400:
                raise BadRequestError(
                    headers=dict(_response.headers),
                    body=typing.cast(
                        typing.Any,
                        construct_type(
                            type_=typing.Any,  # type: ignore
                            object_=_response.json(),
                        ),
                    ),
                )
            _response_json = _response.json()
        except JSONDecodeError:
            raise ApiError(status_code=_response.status_code, headers=dict(_response.headers), body=_response.text)
        raise ApiError(status_code=_response.status_code, headers=dict(_response.headers), body=_response_json)

    async def put_revoke_user_permission(
        self, email: str, *, request_options: typing.Optional[RequestOptions] = None
    ) -> AsyncHttpResponse[PutRevokeUserPermissionResponse]:
        """
        Parameters
        ----------
        email : str
            Email of the invited user.

        request_options : typing.Optional[RequestOptions]
            Request-specific configuration.

        Returns
        -------
        AsyncHttpResponse[PutRevokeUserPermissionResponse]
            Credit note exists
        """
        _response = await self._client_wrapper.httpx_client.request(
            f"organization/user/invitation/revoke/{jsonable_encoder(email)}",
            method="PUT",
            request_options=request_options,
        )
        try:
            if 200 <= _response.status_code < 300:
                _data = typing.cast(
                    PutRevokeUserPermissionResponse,
                    construct_type(
                        type_=PutRevokeUserPermissionResponse,  # type: ignore
                        object_=_response.json(),
                    ),
                )
                return AsyncHttpResponse(response=_response, data=_data)
            if _response.status_code == 403:
                raise ForbiddenError(
                    headers=dict(_response.headers),
                    body=typing.cast(
                        typing.Any,
                        construct_type(
                            type_=typing.Any,  # type: ignore
                            object_=_response.json(),
                        ),
                    ),
                )
            _response_json = _response.json()
        except JSONDecodeError:
            raise ApiError(status_code=_response.status_code, headers=dict(_response.headers), body=_response.text)
        raise ApiError(status_code=_response.status_code, headers=dict(_response.headers), body=_response_json)

    async def inviteuser(
        self,
        *,
        all_features_access: bool,
        email: str,
        privileges: typing.Sequence[InviteuserPrivilegesItem],
        request_options: typing.Optional[RequestOptions] = None,
    ) -> AsyncHttpResponse[InviteuserResponse]:
        """
        `Feature` - A Feature represents a specific functionality like Email
        campaign, Deals, Calls, Automations, etc. on Brevo. While inviting a user,
        determine which feature you want to manage access to. You must specify the
        feature accurately to avoid errors. `Permission` - A Permission defines the
        level of access or control a user has over a specific feature. While
        inviting user, decide on the permission level required for the selected
        feature. Make sure the chosen permission is related to the selected feature.
        Features and their respective permissions are as below: - `email_campaigns`:
          - "create_edit_delete"
          - "send_schedule_suspend"
        - `sms_campaigns`:
          - "create_edit_delete"
          - "send_schedule_suspend"
        - `contacts`:
          - "view"
          - "create_edit_delete"
          - "import"
          - "export"
          - "list_and_attributes"
          - "forms"
        - `templates`:
          - "create_edit_delete"
          - "activate_deactivate"
        - `workflows`:
          - "create_edit_delete"
          - "activate_deactivate_pause"
          - "settings"
        - `landing_pages`:
          - "all"
        - `transactional_emails`:
          - "settings"
          - "logs"
        - `smtp_api`:
          - "smtp"
          - "api_keys"
          - "authorized_ips"
        - `user_management`:
          - "all"
        - `sales_platform`:
          - "create_edit_deals"
          - "delete_deals"
          - "manage_others_deals_tasks"
          - "reports"
          - "settings"
        - `phone`:
          - "all"
        - `conversations`:
          - "access"
          - "assign"
          - "configure"
        - `senders_domains_dedicated_ips`:
          - "senders_management"
          - "domains_management"
          - "dedicated_ips_management"
        - `push_notifications`:
          - "view"
          - "create_edit_delete"
          - "send"
          - "settings"
        - `companies`:
          - "manage_owned_companies"
          - "manage_other_companies"
          - "settings"
        **Note**: - If `all_features_access: false` then only privileges are
        required otherwise if `true` then it's assumed that all permissions will be
        there for the invited user. - The availability of feature and its permission
        depends on your current plan. Please select the features and permissions
        accordingly.

        Parameters
        ----------
        all_features_access : bool
            All access to the features

        email : str
            Email address for the organization

        privileges : typing.Sequence[InviteuserPrivilegesItem]

        request_options : typing.Optional[RequestOptions]
            Request-specific configuration.

        Returns
        -------
        AsyncHttpResponse[InviteuserResponse]
            Success
        """
        _response = await self._client_wrapper.httpx_client.request(
            "organization/user/invitation/send",
            method="POST",
            json={
                "all_features_access": all_features_access,
                "email": email,
                "privileges": convert_and_respect_annotation_metadata(
                    object_=privileges, annotation=typing.Sequence[InviteuserPrivilegesItem], direction="write"
                ),
            },
            headers={
                "content-type": "application/json",
            },
            request_options=request_options,
            omit=OMIT,
        )
        try:
            if 200 <= _response.status_code < 300:
                _data = typing.cast(
                    InviteuserResponse,
                    construct_type(
                        type_=InviteuserResponse,  # type: ignore
                        object_=_response.json(),
                    ),
                )
                return AsyncHttpResponse(response=_response, data=_data)
            if _response.status_code == 400:
                raise BadRequestError(
                    headers=dict(_response.headers),
                    body=typing.cast(
                        typing.Any,
                        construct_type(
                            type_=typing.Any,  # type: ignore
                            object_=_response.json(),
                        ),
                    ),
                )
            _response_json = _response.json()
        except JSONDecodeError:
            raise ApiError(status_code=_response.status_code, headers=dict(_response.headers), body=_response.text)
        raise ApiError(status_code=_response.status_code, headers=dict(_response.headers), body=_response_json)

    async def putresendcancelinvitation(
        self,
        action: PutresendcancelinvitationRequestAction,
        email: str,
        *,
        request_options: typing.Optional[RequestOptions] = None,
    ) -> AsyncHttpResponse[PutresendcancelinvitationResponse]:
        """
        Parameters
        ----------
        action : PutresendcancelinvitationRequestAction
            action

        email : str
            Email of the invited user.

        request_options : typing.Optional[RequestOptions]
            Request-specific configuration.

        Returns
        -------
        AsyncHttpResponse[PutresendcancelinvitationResponse]
            Success
        """
        _response = await self._client_wrapper.httpx_client.request(
            f"organization/user/invitation/{jsonable_encoder(action)}/{jsonable_encoder(email)}",
            method="PUT",
            request_options=request_options,
        )
        try:
            if 200 <= _response.status_code < 300:
                _data = typing.cast(
                    PutresendcancelinvitationResponse,
                    construct_type(
                        type_=PutresendcancelinvitationResponse,  # type: ignore
                        object_=_response.json(),
                    ),
                )
                return AsyncHttpResponse(response=_response, data=_data)
            if _response.status_code == 403:
                raise ForbiddenError(
                    headers=dict(_response.headers),
                    body=typing.cast(
                        typing.Any,
                        construct_type(
                            type_=typing.Any,  # type: ignore
                            object_=_response.json(),
                        ),
                    ),
                )
            _response_json = _response.json()
        except JSONDecodeError:
            raise ApiError(status_code=_response.status_code, headers=dict(_response.headers), body=_response.text)
        raise ApiError(status_code=_response.status_code, headers=dict(_response.headers), body=_response_json)

    async def edit_user_permission(
        self,
        *,
        all_features_access: bool,
        email: str,
        privileges: typing.Sequence[InviteuserPrivilegesItem],
        request_options: typing.Optional[RequestOptions] = None,
    ) -> AsyncHttpResponse[EditUserPermissionResponse]:
        """
        `Feature` - A Feature represents a specific functionality like Email
        campaign, Deals, Calls, Automations, etc. on Brevo. While inviting a user,
        determine which feature you want to manage access to. You must specify the
        feature accurately to avoid errors. `Permission` - A Permission defines the
        level of access or control a user has over a specific feature. While
        inviting user, decide on the permission level required for the selected
        feature. Make sure the chosen permission is related to the selected feature.
        Features and their respective permissions are as below: - `email_campaigns`:
          - "create_edit_delete"
          - "send_schedule_suspend"
        - `sms_campaigns`:
          - "create_edit_delete"
          - "send_schedule_suspend"
        - `contacts`:
          - "view"
          - "create_edit_delete"
          - "import"
          - "export"
          - "list_and_attributes"
          - "forms"
        - `templates`:
          - "create_edit_delete"
          - "activate_deactivate"
        - `workflows`:
          - "create_edit_delete"
          - "activate_deactivate_pause"
          - "settings"
        - `landing_pages`:
          - "all"
        - `transactional_emails`:
          - "settings"
          - "logs"
        - `smtp_api`:
          - "smtp"
          - "api_keys"
          - "authorized_ips"
        - `user_management`:
          - "all"
        - `sales_platform`:
          - "create_edit_deals"
          - "delete_deals"
          - "manage_others_deals_tasks"
          - "reports"
          - "settings"
        - `phone`:
          - "all"
        - `conversations`:
          - "access"
          - "assign"
          - "configure"
        - `senders_domains_dedicated_ips`:
          - "senders_management"
          - "domains_management"
          - "dedicated_ips_management"
        - `push_notifications`:
          - "view"
          - "create_edit_delete"
          - "send"
          - "settings"
        - `companies`:
          - "manage_owned_companies"
          - "manage_other_companies"
          - "settings"
        **Note**: - The privileges array remains the same as in the send invitation;
        the user simply needs to provide the permissions that need to be updated. -
        The availability of feature and its permission depends on your current plan.
        Please select the features and permissions accordingly.

        Parameters
        ----------
        all_features_access : bool
            All access to the features

        email : str
            Email address for the organization

        privileges : typing.Sequence[InviteuserPrivilegesItem]

        request_options : typing.Optional[RequestOptions]
            Request-specific configuration.

        Returns
        -------
        AsyncHttpResponse[EditUserPermissionResponse]
            Success
        """
        _response = await self._client_wrapper.httpx_client.request(
            "organization/user/update/permissions",
            method="POST",
            json={
                "all_features_access": all_features_access,
                "email": email,
                "privileges": convert_and_respect_annotation_metadata(
                    object_=privileges, annotation=typing.Sequence[InviteuserPrivilegesItem], direction="write"
                ),
            },
            headers={
                "content-type": "application/json",
            },
            request_options=request_options,
            omit=OMIT,
        )
        try:
            if 200 <= _response.status_code < 300:
                _data = typing.cast(
                    EditUserPermissionResponse,
                    construct_type(
                        type_=EditUserPermissionResponse,  # type: ignore
                        object_=_response.json(),
                    ),
                )
                return AsyncHttpResponse(response=_response, data=_data)
            if _response.status_code == 400:
                raise BadRequestError(
                    headers=dict(_response.headers),
                    body=typing.cast(
                        typing.Any,
                        construct_type(
                            type_=typing.Any,  # type: ignore
                            object_=_response.json(),
                        ),
                    ),
                )
            _response_json = _response.json()
        except JSONDecodeError:
            raise ApiError(status_code=_response.status_code, headers=dict(_response.headers), body=_response.text)
        raise ApiError(status_code=_response.status_code, headers=dict(_response.headers), body=_response_json)

    async def get_user_permission(
        self, email: str, *, request_options: typing.Optional[RequestOptions] = None
    ) -> AsyncHttpResponse[GetUserPermissionResponse]:
        """
        Parameters
        ----------
        email : str
            Email of the invited user.

        request_options : typing.Optional[RequestOptions]
            Request-specific configuration.

        Returns
        -------
        AsyncHttpResponse[GetUserPermissionResponse]
            list of all the user's permissions
        """
        _response = await self._client_wrapper.httpx_client.request(
            f"organization/user/{jsonable_encoder(email)}/permissions",
            method="GET",
            request_options=request_options,
        )
        try:
            if 200 <= _response.status_code < 300:
                _data = typing.cast(
                    GetUserPermissionResponse,
                    construct_type(
                        type_=GetUserPermissionResponse,  # type: ignore
                        object_=_response.json(),
                    ),
                )
                return AsyncHttpResponse(response=_response, data=_data)
            if _response.status_code == 400:
                raise BadRequestError(
                    headers=dict(_response.headers),
                    body=typing.cast(
                        typing.Any,
                        construct_type(
                            type_=typing.Any,  # type: ignore
                            object_=_response.json(),
                        ),
                    ),
                )
            _response_json = _response.json()
        except JSONDecodeError:
            raise ApiError(status_code=_response.status_code, headers=dict(_response.headers), body=_response.text)
        raise ApiError(status_code=_response.status_code, headers=dict(_response.headers), body=_response_json)
